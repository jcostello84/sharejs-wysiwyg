<html>   

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/jquery-ui.min.js"></script>
<script src="http://localhost:8000/channel/bcsocket.js"></script>
<script src="http://localhost:8000/share/share.js"></script>
<script src="http://localhost:8000/share/share.uncompressed.js"></script>
<script src="http://localhost:10000/Tiny_files/textarea2.js"></script>
<script src="http://localhost:8000/share/json.js"></script>




    
    <textarea id="purpose-editor" class="editor" contenteditable="true"></textarea>
    <textarea id="purpose" placeholder="this is a test"></textarea>

<script>
$(document).ready(function () {
  
  var $purpose = $('#purpose');
  var $purposeEditor = $('.editor');
  
	  var connection = sharejs.open('blag', 'text', 'http://localhost:8000/channel', function(error, doc) {
            if (error) {
	  		    console.log(error);
	  	    } else {
	  		    $purpose.disabled = false;
	  		   // $purpose.attachEvent('keyup');
                doc.attach_textarea($purpose[0]);
			    $purposeEditor.val($purpose.val());
	  	    }
        
        
        });
     
     //$purpose.keyup(function () { $purposeEditor.val($purpose.val()); });
     $purpose.bind('change', function () { $purposeEditor.val($purpose.val()); });
     
        
     //$purposeEditor.keyup(function () {	 $purpose.val($purposeEditor.val()); });
 
     $(".btn-toolbar").click(function () { $purpose.val($purposeEditor.val()); });




});
  
    </script>

<script>

        $('.editor').keyup(function () {
        //var connection = sharejs.open('blag', 'text', 'http://localhost:8000/channel', function(error, doc) {
		    $("#purpose").val($('.editor').val()); 
          //  var $text = $('#purpose').val();
            //var $purposeEditor = $('#purpose-editor');
            //if (error) {
	  		//    console.log(error);
	  	    //} else {
		      //  var temp = $("#purpose").val($('#purpose-editor').val()); 
                //console.log(temp.val());
                //valueT = temp.val();
                //console.log(valueT);
	  		    //$text.val($('#purpose-editor').val());
                //temp.disabled = false;
                $('#purpose').blur('keyup');
	  		    console.log($('#purpose').val());
                //doc.attach_textarea(valueT);
                //alert(temp.val());
	  	    //}
	    });
	  
      //});


</script>

<script>
        //$('#purpose').bind('keyup', function(e){
        //    console.log(e);
        //    var connection = sharejs.open('blag', 'text', 'http://localhost:8000/channel', function(error, doc) {
		//        var temp = $("#purpose").val($('#purpose-editor').val()); 
        //        valueT = temp.val();
        //        temp.disabled = false;
	  	//	    doc.attach_textarea(valueT);
        //    });
        //});
</script>

    <div id="display" style="visibility:hidden;" disabled>
        <div id="hypothesis" class="editor">
        Go ahead...
        </div>
    </div>

</body>
</html>
