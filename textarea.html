<html>   

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/jquery-ui.min.js"></script>
<script src="http://localhost:8000/channel/bcsocket.js"></script>
<script src="http://localhost:8000/share/share.js"></script>
<script src="http://localhost:8000/share/share.uncompressed.js"></script>
<script src="http://localhost:10000/Tiny_files/textarea2.js"></script>
<script src="http://localhost:8000/share/json.js"></script>




    
    <textarea id="purpose-editor" class="editor" contenteditable="true" style="width:300px; height:300px;"></textarea>
    <textarea id="purpose" placeholder="this is a test" style="width:300px; height:300px;"></textarea>

<script>
$(document).ready(function () {
  
  var $purpose = $('#purpose');
  var $purposeEditor = $('.editor');
  
	   sharejs.open('blag', 'text', 'http://localhost:8000/channel', function(error, doc) {
            if (error) {
	  		    console.log(error);
	  	    } else {
	  		    $purpose.disabled = false;
	  		   // $purpose.attachEvent('keyup');
                doc.attach_textarea($purpose[0]);
			    $purposeEditor.val($purpose.val());
	  	    }
        });
     //$purpose.keyup(function () { $purposeEditor.val($purpose.val()); });
     //$purpose.bind('change', function () { $purposeEditor.val($purpose.val()); });
     //$purposeEditor.keyup(function () {	 $purpose.val($purposeEditor.val()); });
     $(".btn-toolbar").click(function () { $purpose.val($purposeEditor.val()); 
     $('#purpose').trigger('keyup');
     });
    });
</script>

<script>
        $('.editor').keyup(function () {
	  		    console.log($('#purpose').val());
                $('#purpose').trigger('keyup');
	    });
</script>

<script>
        $('#purpose').bind('keyup propertychange', function(e){
            //$("#purpose").focus();
            $("#purpose").val($('#purpose-editor').val());
            $("#purpose").focus();
            console.log($("#purpose").val());
        });
</script>

<script>
        $('#purpose').bind('change', function(){
            
        
        });
        //$('#purpose-editor').bind('input propertychange', function(e){ 
        //    $('#purpose-editor').focus();
        //});
</script>


    <div id="display" style="visibility:hidden;" disabled>
        <div id="hypothesis" class="editor">
        Go ahead...
        </div>
    </div>

</body>
</html>
